<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Snake2" rel="Chapter" href="Snake2.html"><link title="Fonctions graphiques" rel="Section" href="#2_Fonctionsgraphiques">
<link title="Les types pour les elements du jeu" rel="Section" href="#2_Lestypespourleselementsdujeu">
<link title="Parametrage des elements du jeu" rel="Section" href="#2_Parametragedeselementsdujeu">
<link title="Initialisation du jeu" rel="Section" href="#2_Initialisationdujeu">
<link title="Les fonctions necessaires au calcul d'une etape" rel="Section" href="#2_Lesfonctionsnecessairesaucalculduneetape">
<link title="Nouvelles fonctions de la deuxième version du jeu du serpent." rel="Section" href="#2_Nouvellesfonctionsdeladeuximeversiondujeuduserpent">
<link title="Gestion du temps" rel="Section" href="#2_Gestiondutemps">
<link title="Fonction de simulation" rel="Section" href="#2_Fonctiondesimulation">
<link title="Parametrage" rel="Subsection" href="#3_Parametrage">
<link title="Transformation geometrique" rel="Subsection" href="#3_Transformationgeometrique">
<link title="Affichage" rel="Subsection" href="#3_Affichage">
<link title="Le serpent" rel="Subsection" href="#3_Leserpent">
<link title="La matrice" rel="Subsection" href="#3_Lamatrice">
<link title="Le container" rel="Subsection" href="#3_Lecontainer">
<link title="Fonction utilitaire : conversion valeur de matrice <-> couleur" rel="Subsection" href="#3_Fonctionutilitaireconversionvaleurdematricecouleur">
<link title="Matrice" rel="Subsection" href="#3_Matrice">
<link title="Temps et vitesse" rel="Subsection" href="#3_Tempsetvitesse">
<link title="Serpent" rel="Subsection" href="#3_Serpent">
<link title="Fonctions de dessin pour l'initialisation" rel="Subsection" href="#3_Fonctionsdedessinpourlinitialisation">
<link title="Initialisation du serpent, de la matrice de jeu, du container et de l'affichage" rel="Subsection" href="#3_Initialisationduserpentdelamatricedejeuducontaineretdelaffichage">
<link title="Calcul de la nouvelle position de la tete et de la valeur correspondante" rel="Subsection" href="#3_Calculdelanouvellepositiondelateteetdelavaleurcorrespondante">
<link title="Deplacement du serpent, par suppression de sa queue et ajout de sa "nouvelle" tete" rel="Subsection" href="#3_Deplacementduserpentparsuppressiondesaqueueetajoutdesanouvelletete">
<link title="Extension 1: Score" rel="Subsection" href="#3_Extension1Score">
<link title="Extension 2: Accroissement de la longueur du serpent" rel="Subsection" href="#3_Extension2Accroissementdelalongueurduserpent">
<link title="Extension 3 : Bonus " rel="Subsection" href="#3_Extension3Bonus">
<link title="Calcul d'une etape de jeu" rel="Subsection" href="#3_Calculduneetapedejeu">
<link title="Acceleration" rel="Subsection" href="#3_Acceleration">
<link title="Pause entre deux etapes" rel="Subsection" href="#3_Pauseentredeuxetapes">
<title>Snake2</title>
</head>
<body>
<div class="navbar">&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;</div>
<h1>Module <a href="type_Snake2.html">Snake2</a></h1>

<pre><span class="keyword">module</span> Snake2: <code class="code">sig</code> <a href="Snake2.html">..</a> <code class="code">end</code></pre><div class="info module top">
Jeu de serpent 
<p>

Le descriptif complet de cette version du jeu figure sur UPdago, cours de Complement de Programmation, section "Jeu de serpent", fichier "snake_partie_1.pdf" ;
<p>

3 elements sont essentiels : le serpent, son environnement (la matrice de jeu), la fenetre d'affichage. La partie de la fenetre d'affichage correspondant a la matrice de jeu est appelee la zone de jeu.<br>
</div>
<hr width="100%">
<br>
<h2 id="2_Fonctionsgraphiques">Fonctions graphiques</h2><br>
<br>
<h3 id="3_Parametrage">Parametrage</h3><br>

<pre><span id="VALmytranslation_x"><span class="keyword">val</span> mytranslation_x</span> : <code class="type">unit -> int</code></pre><div class="info ">
donne le decalage en x de la zone de jeu par rapport a l'origine de la fenetre d'affichage<br>
</div>

<pre><span id="VALmytranslation_y"><span class="keyword">val</span> mytranslation_y</span> : <code class="type">unit -> int</code></pre><div class="info ">
donne le decalage en y de la zone de jeu par rapport a l'origine de la fenetre d'affichage<br>
</div>

<pre><span id="VALmydilation_x"><span class="keyword">val</span> mydilation_x</span> : <code class="type">unit -> int</code></pre><div class="info ">
donne le nombre de pixels de la zone de jeu (en x) correspondant a un point de la matrice de jeu<br>
</div>

<pre><span id="VALmydilation_y"><span class="keyword">val</span> mydilation_y</span> : <code class="type">unit -> int</code></pre><div class="info ">
donne le nombre de pixels de la zone de jeu (en y) correspondant a un point de la matrice de jeu<br>
</div>
<br>
<h3 id="3_Transformationgeometrique">Transformation geometrique</h3><br>

<pre><span id="VALmygraphic_x"><span class="keyword">val</span> mygraphic_x</span> : <code class="type">int -> int</code></pre><div class="info ">
calcule l'abscisse du pixel en bas a gauche du rectangle de pixels de la zone de jeu qui correspond a un point dans la matrice de jeu, a partir de l'abscisse de ce point<br>
</div>

<pre><span id="VALmygraphic_y"><span class="keyword">val</span> mygraphic_y</span> : <code class="type">int -> int</code></pre><div class="info ">
calcule l'ordonnee du pixel en bas a gauche du rectangle de pixels de la zone de jeu qui correspond a un point dans la matrice de jeu, a partir de l'ordonnee de ce point<br>
</div>
<br>
<h3 id="3_Affichage">Affichage</h3><br>

<pre><span id="VALmyplot"><span class="keyword">val</span> myplot</span> : <code class="type">int * int -> unit</code></pre><div class="info ">
affiche le rectangle de pixels de la zone de jeu qui correspond a un point dans la matrice de jeu, a partir des coordonnees de ce point<br>
</div>

<pre><span id="VALmyfill_rect"><span class="keyword">val</span> myfill_rect</span> : <code class="type">int * int * int * int -> unit</code></pre><div class="info ">
affiche le rectangle de pixels de la zone de jeu qui correspond a un rectangle dans la  matrice de jeu.
<p>

Les deux premiers parametres sont les coordonnees du point en bas a gauche du rectangle de la matrice de jeu ;
<p>

les deux derniers parametres sont la largeur et la hauteur du rectangle de la matrice de jeu.<br>
</div>
<br>
<h2 id="2_Lestypespourleselementsdujeu">Les types pour les elements du jeu</h2><br>
<br>
<h3 id="3_Leserpent">Le serpent</h3><br>

<pre><code><span id="TYPEt_direction"><span class="keyword">type</span> <code class="type"></code>t_direction</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_direction.LEFT"><span class="constructor">LEFT</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_direction.RIGHT"><span class="constructor">RIGHT</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_direction.UP"><span class="constructor">UP</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_direction.DOWN"><span class="constructor">DOWN</span></span></code></td>

</tr></table>

<div class="info ">
valeurs possibles caracterisant le deplacement de la tete du serpent<br>
</div>


<pre><code><span id="TYPEt_point"><span class="keyword">type</span> <code class="type"></code>t_point</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_point.x">x</span>&nbsp;: <code class="type">int</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_point.y">y</span>&nbsp;: <code class="type">int</code>;</code></td>

</tr></table>
}

<div class="info ">
pour la representation de points 2D a coordonnees entieres<br>
</div>


<pre><code><span id="TYPEt_position"><span class="keyword">type</span> <code class="type"></code>t_position</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_position.pt">pt</span>&nbsp;: <code class="type"><a href="Snake2.html#TYPEt_point">t_point</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_position.dir">dir</span>&nbsp;: <code class="type"><a href="Snake2.html#TYPEt_direction">t_direction</a></code>;</code></td>

</tr></table>
}

<div class="info ">
une position est definie par un point et une direction<br>
</div>


<pre><span id="TYPEt_snake"><span class="keyword">type</span> <code class="type"></code>t_snake</span> = <code class="type"><a href="Snake2.html#TYPEt_position">t_position</a> list</code> </pre>
<div class="info ">
un serpent est une liste de positions<br>
</div>

<br>
<h3 id="3_Lamatrice">La matrice</h3><br>

<pre><code><span id="TYPEt_value"><span class="keyword">type</span> <code class="type"></code>t_value</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_value.EMPTY"><span class="constructor">EMPTY</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_value.SNAKE"><span class="constructor">SNAKE</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_value.FRAME"><span class="constructor">FRAME</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_value.PROBLEM"><span class="constructor">PROBLEM</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_value.BONUS"><span class="constructor">BONUS</span></span></code></td>

</tr></table>

<div class="info ">
valeurs possibles pour les elements de la matrice de jeu ; dans cette version du jeu, les valeurs FRAME et PROBLEM, bien qu'utilisees dans le jeu, ne sont pas utilisees comme valeurs d'elements de la matrice de jeu<br>
</div>


<pre><span id="TYPEt_matrix"><span class="keyword">type</span> <code class="type"></code>t_matrix</span> = <code class="type"><a href="Snake2.html#TYPEt_value">t_value</a> CPutil_sn.matrix</code> </pre>
<div class="info ">
pour la representation d'une matrice de jeu<br>
</div>

<br>
<h3 id="3_Lecontainer">Le container</h3><br>

<pre><code><span id="TYPEt_play"><span class="keyword">type</span> <code class="type"></code>t_play</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_play.dt">dt</span>&nbsp;: <code class="type">float Pervasives.ref</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_play.sn">sn</span>&nbsp;: <code class="type"><a href="Snake2.html#TYPEt_snake">t_snake</a> Pervasives.ref</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_play.mat">mat</span>&nbsp;: <code class="type"><a href="Snake2.html#TYPEt_matrix">t_matrix</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt_play.score">score</span>&nbsp;: <code class="type">int Pervasives.ref</code>;</code></td>

</tr></table>
}

<div class="info ">
container rassemblant les caracteristiques d'un jeu<br>
</div>

<br>
<h3 id="3_Fonctionutilitaireconversionvaleurdematricecouleur">Fonction utilitaire : conversion valeur de matrice &lt;-&gt; couleur</h3><br>

<pre><span id="VALcolor_of_value"><span class="keyword">val</span> color_of_value</span> : <code class="type"><a href="Snake2.html#TYPEt_value">t_value</a> -> CPutil_sn.t_color</code></pre><div class="info ">
retourne la couleur associee a une valeur possible d'un element de la matrice<br>
</div>
<br>
<h2 id="2_Parametragedeselementsdujeu">Parametrage des elements du jeu</h2><br>
<br>
<h3 id="3_Matrice">Matrice</h3><br>

<pre><span id="VALmymatrix_dx"><span class="keyword">val</span> mymatrix_dx</span> : <code class="type">unit -> int</code></pre><div class="info ">
donne la taille en x de la matrice de jeu<br>
</div>

<pre><span id="VALmymatrix_dy"><span class="keyword">val</span> mymatrix_dy</span> : <code class="type">unit -> int</code></pre><div class="info ">
donne la taille en y de la matrice de jeu<br>
</div>
<br>
<h3 id="3_Tempsetvitesse">Temps et vitesse</h3><br>

<pre><span id="VALmydt_init"><span class="keyword">val</span> mydt_init</span> : <code class="type">unit -> float</code></pre><div class="info ">
donne l'unite de temps au depart du jeu<br>
</div>

<pre><span id="VALmydt_acc"><span class="keyword">val</span> mydt_acc</span> : <code class="type">unit -> float</code></pre><div class="info ">
donne l'intervalle de temps entre deux accelerations<br>
</div>

<pre><span id="VALmydt_ratio"><span class="keyword">val</span> mydt_ratio</span> : <code class="type">unit -> float</code></pre><div class="info ">
donne le ratio entre les unites de temps apres et avant acceleration<br>
</div>
<br>
<h3 id="3_Serpent">Serpent</h3><br>

<pre><span id="VALmysnake_length_init"><span class="keyword">val</span> mysnake_length_init</span> : <code class="type">unit -> int</code></pre><div class="info ">
donne la longueur du serpent au depart du jeu<br>
</div>

<pre><span id="VALmysnake_position_init"><span class="keyword">val</span> mysnake_position_init</span> : <code class="type">unit -> <a href="Snake2.html#TYPEt_point">t_point</a></code></pre><div class="info ">
donne la position de la tete du serpent au depart du jeu<br>
</div>
<br>
<h2 id="2_Initialisationdujeu">Initialisation du jeu</h2><br>
<br>
<h3 id="3_Fonctionsdedessinpourlinitialisation">Fonctions de dessin pour l'initialisation</h3><br>

<pre><span id="VALdraw_frame"><span class="keyword">val</span> draw_frame</span> : <code class="type">unit -> unit</code></pre><div class="info ">
dessine le cadre entourant la zone de jeu<br>
</div>

<pre><span id="VALdraw_whole_snake_aux"><span class="keyword">val</span> draw_whole_snake_aux</span> : <code class="type"><a href="Snake2.html#TYPEt_snake">t_snake</a> -> unit</code></pre><div class="info ">
devrait etre une fonction locale a draw_whole_snake ; laissee en fonction globale afin de pouvoir tracer son execution dans l'interpreteur avec la commande #trace<br>
</div>

<pre><span id="VALdraw_whole_snake"><span class="keyword">val</span> draw_whole_snake</span> : <code class="type"><a href="Snake2.html#TYPEt_snake">t_snake</a> -> unit</code></pre><div class="info ">
dessine le serpent a l'initialisation, cad l'ensemble de ses positions<br>
</div>
<br>
<h3 id="3_Initialisationduserpentdelamatricedejeuducontaineretdelaffichage">Initialisation du serpent, de la matrice de jeu, du container et de l'affichage</h3><br>

<pre><span id="VALinit_snake_aux"><span class="keyword">val</span> init_snake_aux</span> : <code class="type">int * <a href="Snake2.html#TYPEt_point">t_point</a> -> <a href="Snake2.html#TYPEt_snake">t_snake</a></code></pre><div class="info ">
devrait etre une fonction locale a init_snake ; laissee en fonction globale afin de pouvoir tracer son execution dans l'interpreteur avec la commande #trace<br>
</div>

<pre><span id="VALinit_snake"><span class="keyword">val</span> init_snake</span> : <code class="type">unit -> <a href="Snake2.html#TYPEt_snake">t_snake</a></code></pre><div class="info ">
calcule le serpent au depart du jeu<br>
</div>

<pre><span id="VALinit_matrix"><span class="keyword">val</span> init_matrix</span> : <code class="type">unit -> <a href="Snake2.html#TYPEt_matrix">t_matrix</a></code></pre><div class="info ">
initialise une matrice de jeu vide<br>
</div>

<pre><span id="VALinit_snake_matrix"><span class="keyword">val</span> init_snake_matrix</span> : <code class="type">unit -> <a href="Snake2.html#TYPEt_snake">t_snake</a> * <a href="Snake2.html#TYPEt_matrix">t_matrix</a></code></pre><div class="info ">
initialise le serpent et la matrice de jeu (le serpent est insere dans la matrice de jeu)<br>
</div>
<br>
<h2 id="2_Lesfonctionsnecessairesaucalculduneetape">Les fonctions necessaires au calcul d'une etape</h2><br>
<br>
<h3 id="3_Calculdelanouvellepositiondelateteetdelavaleurcorrespondante">Calcul de la nouvelle position de la tete et de la valeur correspondante</h3><br>

<pre><span id="VALanalyze"><span class="keyword">val</span> analyze</span> : <code class="type"><a href="Snake2.html#TYPEt_position">t_position</a> -> <a href="Snake2.html#TYPEt_direction">t_direction</a></code></pre><div class="info ">
calcule la direction de deplacement en fonction des positions relatives de la souris et de la tete du serpent, en evitant au serpent de se tordre le cou (la tete du serpent ne doit pas tourner a 180 degres)<br>
</div>

<pre><span id="VALcompute_new_position"><span class="keyword">val</span> compute_new_position</span> : <code class="type"><a href="Snake2.html#TYPEt_position">t_position</a> * <a href="Snake2.html#TYPEt_direction">t_direction</a> -> <a href="Snake2.html#TYPEt_position">t_position</a></code></pre><div class="info ">
calcule la position ou devrait se trouver la tete du serpent apres deplacement, a partir de son ancienne position et d'une direction de deplacement<br>
</div>

<pre><span id="VALcompute_move"><span class="keyword">val</span> compute_move</span> : <code class="type"><a href="Snake2.html#TYPEt_position">t_position</a> * <a href="Snake2.html#TYPEt_direction">t_direction</a> * <a href="Snake2.html#TYPEt_matrix">t_matrix</a> -><br>       <a href="Snake2.html#TYPEt_position">t_position</a> * <a href="Snake2.html#TYPEt_value">t_value</a></code></pre><div class="info ">
calcule la position ou devrait se trouver la tete du serpent apres deplacement, ainsi que la valeur correspondante de la matrice de jeu, a partir de son ancienne position, d'une direction de deplacement et de la matrice de jeu ; retourne la valeur FRAME si la tete du serpent sort de la matrice de jeu<br>
</div>
<br>
<h3 id="3_Deplacementduserpentparsuppressiondesaqueueetajoutdesanouvelletete">Deplacement du serpent, par suppression de sa queue et ajout de sa "nouvelle" tete</h3><br>

<pre><span id="VALremove_snake_tail"><span class="keyword">val</span> remove_snake_tail</span> : <code class="type"><a href="Snake2.html#TYPEt_play">t_play</a> -> unit</code></pre><div class="info ">
supprime la queue du serpent, c'est a dire sa derniere position<br>
</div>

<pre><span id="VALadd_snake_newhead"><span class="keyword">val</span> add_snake_newhead</span> : <code class="type"><a href="Snake2.html#TYPEt_play">t_play</a> * <a href="Snake2.html#TYPEt_position">t_position</a> -> unit</code></pre><div class="info ">
ajoute sa nouvelle tete au serpent<br>
</div>

<pre><span id="VALmove_snake"><span class="keyword">val</span> move_snake</span> : <code class="type"><a href="Snake2.html#TYPEt_play">t_play</a> * <a href="Snake2.html#TYPEt_position">t_position</a> -> unit</code></pre><div class="info ">
deplace le serpent par ajout de sa nouvelle tete et suppression de sa derniere position<br>
</div>
<br>
<h2 id="2_Nouvellesfonctionsdeladeuximeversiondujeuduserpent">Nouvelles fonctions de la deuxième version du jeu du serpent.</h2><br>
<br>
<h3 id="3_Extension1Score">Extension 1: Score</h3><br>

<pre><span id="VALincrease_score"><span class="keyword">val</span> increase_score</span> : <code class="type"><a href="Snake2.html#TYPEt_play">t_play</a> -> int</code></pre><div class="info ">
le score sera calculé fonction du temps<br>
<b>Author(s):</b> Duc<br>
<b>Since</b> 2.0<br>
<b>Returns</b> le score actualisé<br>
</div>

<pre><span id="VALset_score"><span class="keyword">val</span> set_score</span> : <code class="type">unit -> unit</code></pre><div class="info ">
Affiche le score dans la fenêtre graphique en dessous de la mattrice de jeu en faisant bien attention qu'ils ne soit pas placé dans la matrice de jeu<br>
<b>Author(s):</b> Duc<br>
<b>Since</b> 2.0<br>
</div>

<pre><span id="VALdisplay_score"><span class="keyword">val</span> display_score</span> : <code class="type"><a href="Snake2.html#TYPEt_play">t_play</a> -> unit</code></pre><div class="info ">
Affiche le résultat à la suite de la fonction set_score()<br>
<b>Author(s):</b> Duc<br>
<b>Since</b> 2.0<br>
</div>
<br>
<h3 id="3_Extension2Accroissementdelalongueurduserpent">Extension 2: Accroissement de la longueur du serpent</h3><br>

<pre><span id="VALadd_snake_tail"><span class="keyword">val</span> add_snake_tail</span> : <code class="type"><a href="Snake2.html#TYPEt_play">t_play</a> -> unit</code></pre><div class="info ">
Fonction qui allonge le serpent d'une case à chaque appel en fonction de la direction.<br>
<b>Author(s):</b> Guillaume.<br>
<b>Since</b> 2.0<br>
</div>
<br>
<h3 id="3_Extension3Bonus">Extension 3 : Bonus </h3><br>

<pre><span id="VALspawn_bonus_coords"><span class="keyword">val</span> spawn_bonus_coords</span> : <code class="type"><a href="Snake2.html#TYPEt_play">t_play</a> -> int * int</code></pre><div class="info ">
Fonction qui sert à générer les coordonnées du bonus sans conflit avec une case existante.<br>
<b>Author(s):</b> Guillaume<br>
<b>Since</b> 2.0<br>
<b>Returns</b> les coordonées du bonus.<br>
</div>

<pre><span id="VALspawn_bonus"><span class="keyword">val</span> spawn_bonus</span> : <code class="type"><a href="Snake2.html#TYPEt_play">t_play</a> -> unit</code></pre><div class="info ">
Fonction qui fait apparaître un bonus sur une case de la matrice.<br>
<b>Author(s):</b> Guillaume<br>
<b>Since</b> 2.0<br>
</div>

<pre><span id="VALremove_bonus"><span class="keyword">val</span> remove_bonus</span> : <code class="type"><a href="Snake2.html#TYPEt_play">t_play</a> * <a href="Snake2.html#TYPEt_position">t_position</a> -> unit</code></pre><div class="info ">
Fonction qui permet d'effacer un bonus quand il a été mangé.<br>
<b>Author(s):</b> Guillaume<br>
<b>Since</b> 2.0<br>
</div>
<div class="param_info"><code class="code">(pl,pos)</code> : <code>pos</code> : la position du bonus.<br>
<code>pl</code> : le plateau de jeu.</div>

<pre><span id="VALsnake_initial_length"><span class="keyword">val</span> snake_initial_length</span> : <code class="type"><a href="Snake2.html#TYPEt_play">t_play</a> -> unit</code></pre><div class="info ">
Fonction qui remet le serpent à sa taille initiale.<br>
<b>Author(s):</b> Guillaume<br>
<b>Since</b> 2.0<br>
</div>
<br>
<h3 id="3_Calculduneetapedejeu">Calcul d'une etape de jeu</h3><br>

<pre><span id="VALinit_play"><span class="keyword">val</span> init_play</span> : <code class="type">unit -> <a href="Snake2.html#TYPEt_play">t_play</a></code></pre><div class="info ">
initialise le jeu<br>
</div>

<pre><span id="VALnew_step"><span class="keyword">val</span> new_step</span> : <code class="type"><a href="Snake2.html#TYPEt_play">t_play</a> -> bool</code></pre><div class="info ">
deroule une etape de jeu : calcule la nouvelle position de la tete du serpent ainsi que la valeur correspondante, et traite les differents cas : sortie de la zone de jeu, collision du serpent avec lui-meme, deplacement autorise<br>
</div>
<br>
<h2 id="2_Gestiondutemps">Gestion du temps</h2><br>
<br>
<h3 id="3_Acceleration">Acceleration</h3><br>

<pre><span id="VALhandle_t_acc"><span class="keyword">val</span> handle_t_acc</span> : <code class="type">float Pervasives.ref * float Pervasives.ref * <a href="Snake2.html#TYPEt_play">t_play</a> -> unit</code></pre><div class="info ">
effectue une acceleration si les conditions sont remplies<br>
</div>
<br>
<h3 id="3_Pauseentredeuxetapes">Pause entre deux etapes</h3><br>

<pre><span id="VALhandle_time"><span class="keyword">val</span> handle_time</span> : <code class="type">float Pervasives.ref * float -> unit</code></pre><div class="info ">
effectue une pause entre deux etapes de jeu. Dans la version qui a ete distribuee initialement (cf. fichier CPsnake_misc.ml), le corps de cette fonction etait une partie de la fonction "simulation" ; c'est maintenant une fonction a part entiere<br>
</div>
<br>
<h2 id="2_Fonctiondesimulation">Fonction de simulation</h2><br>

<pre><span id="VALsimulation"><span class="keyword">val</span> simulation</span> : <code class="type">unit -> unit</code></pre><div class="info ">
simule le jeu de serpent : contient principalement la boucle de simulation, dans laquelle se font la gestion du temps (respect de l'intervalle de temps entre deux etapes de jeu, acceleration eventuelle) et le calcul d'une etape de jeu. Par rapport a la version initiale figurant dans le fichier CPsnake_misc.ml, la gestion de l'intervalle de temps entre deux etapes de simulation fait maintenant l'objet d'une fonction a part entiere (handle_time)<br>
</div>
</body></html>